version: "1"

package:
  id: com.dongpl.linglong-store.v2
  name: linglong-store
  version: 2.0.0.5
  kind: app
  # channel: beta
  architecture: x86_64
  description: |
    Linglong application community store for discovering and managing Linglong apps.

command:
  - /opt/apps/com.dongpl.linglong-store.v2/files/bin/setup-linyaps-dbus.sh

base: org.deepin.base/25.2.1
runtime: org.deepin.runtime.gtk4/25.2.1

build: |
  install -Dm755 /project/linglong/sources/linglong-store ${PREFIX}/bin/linglong-store
  install -Dm755 /project/linglong/sources/linyaps-dbus-server ${PREFIX}/bin/linyaps-dbus-server
  install -Dm755 /project/linglong/sources/ll-cli ${PREFIX}/bin/ll-cli
  cp -a ./linglong-store_asset/usr/* ${PREFIX}

sources:
  - kind: file
    url: https://github.com/SXFreell/linglong-store/releases/download/2.0.0-beta.2/linglong-store-amd64
    digest: 7b11fb6bbf4439af7300b3b1de147e6b317be6e5a9c6bb4d98e00304fa9092bc
    name: linglong-store

  - kind: file
    url: https://github.com/guanzi008/org.linglong-store.LinyapsManager/releases/download/v0.0.2/linyaps-dbus-server-linux-amd64
    digest: b46a6ae70df7d1fa3cd22f56e14e21a4b0c896ff6149faa1222edb15c6c9f8a1
    name: linyaps-dbus-server

  - kind: file
    url: https://github.com/guanzi008/org.linglong-store.LinyapsManager/releases/download/v0.0.2/linyapsctl-linux-amd64
    digest: edcd901257ae9f61fba4e7951c61fef35139e6af1c4a3409f5e59154879a73b1
    name: ll-cli

