version: "1"

package:
  id: com.dongpl.linglong-store.v2
  name: linglong-store
  version: 2.0.1.1
  kind: app
  # channel: beta
  architecture: x86_64
  description: |
    用于发现和管理玲珑应用的玲珑商店社区版。

command:
  - /opt/apps/com.dongpl.linglong-store.v2/files/bin/setup-linyaps-dbus.sh

base: org.deepin.base/25.2.1
runtime: org.deepin.runtime.gtk4/25.2.1

build: |
  install -Dm755 /project/linglong/sources/linglong-store ${PREFIX}/bin/linglong-store
  install -Dm755 /project/linglong/sources/linyaps-dbus-server ${PREFIX}/bin/linyaps-dbus-server
  install -Dm755 /project/linglong/sources/linyapsctl ${PREFIX}/bin/ll-cli
  install -Dm755 /project/linglong/sources/linyapsctl ${PREFIX}/bin/pkexec
  cp -a ./resources/usr/* ${PREFIX}

sources:
  - kind: file
    url: https://github.com/SXFreell/linglong-store/releases/download/2.0.1/linglong-store-amd64
    digest: a435ae8c97355c77881ec4987133730a681a5a7bd85141aef601064a3e8a1ad3
    name: linglong-store

  - kind: file
    url: https://github.com/guanzi008/org.linglong-store.LinyapsManager/releases/download/v0.0.8/linyaps-dbus-server-linux-amd64
    digest: cd19236fabcd95bf9713e98cc266a579844db8ed144ae03897e6bdc809e9c80e
    name: linyaps-dbus-server

  - kind: file
    url: https://github.com/guanzi008/org.linglong-store.LinyapsManager/releases/download/v0.0.8/linyapsctl-linux-amd64
    digest: 1e554071518e7d9a7c7a0d63a22e523da93bdd6a4dd3aca41bb3d5c63d5bca42
    name: linyapsctl
